<app-loading *ngIf="isLoading[0]"></app-loading>
<div class="title">
  <h5 class="text-center"><i class="fas fa-user mr-2"></i>MES COMPTE</h5>
</div>
<div class="adduser pb-3" *ngIf="!isLoading[0]">
  <div class="container mt-2">
    <form #accountForm="ngForm" (submit)="onSave()">
      <div class="formContainer row">
        <div class="col-md-2 text-center">
          <i class="fas fa-user bigIcon"></i>
        </div>
        <div class="col-md-10">
          <div class="mt-2 mb-2 alert alert-success" *ngIf="saved">
            EnregistrÃ© avec succes
          </div>
          <div class="mt-2 mb-2 alert alert-danger" *ngIf="errorMessage">
            {{errorMessage}}
          </div>
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>Nom</mat-label>
            <input matInput name="nom" required [(ngModel)]="user.nom" #nom="ngModel">
            <mat-error *ngIf="nom.invalid && nom.touched">
              Nom n'est pas valide
            </mat-error>
          </mat-form-field>

          <mat-form-field class="full-width" appearance="outline">
            <mat-label>Prenom</mat-label>
            <input matInput name="prenom" required [(ngModel)]="user.prenom" #prenom="ngModel">
            <mat-error *ngIf="prenom.invalid && prenom.touched">
              Prenom n'est pas valide
            </mat-error>
          </mat-form-field>
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>Email</mat-label>
            <input matInput name="email" required email [(ngModel)]="user.email" #email="ngModel">
            <mat-error *ngIf="email.invalid && email.touched">
              Email n'est pas valide
            </mat-error>
          </mat-form-field> 
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>Mobile</mat-label>
            <input matInput name="tel_p" required [(ngModel)]="user.tel_p" #tel_p="ngModel">
            <mat-error *ngIf="tel_p.invalid && tel_p.touched">
              Mobile n'est pas valide
            </mat-error>
          </mat-form-field>
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>Fix</mat-label>
            <input matInput name="tel_fix" [(ngModel)]="user.tel_fix" #tel_fix="ngModel">
            <mat-error *ngIf="tel_fix.invalid && tel_fix.touched">
              Fix n'est pas valide
            </mat-error>
          </mat-form-field>
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>Adresse</mat-label>
            <input matInput name="adresse" required [(ngModel)]="user.adresse" #adresse="ngModel">
            <mat-error *ngIf="adresse.invalid && adresse.touched">
              Adresse n'est pas valide
            </mat-error>
          </mat-form-field>
          <mat-form-field class="full-width" appearance="outline">
            <mat-label>Mot de passe :</mat-label>
            <input type="password" matInput class="formInput" [(ngModel)]="user.password" name="password"
              #password="ngModel">
          </mat-form-field>
        </div>
      </div>
      <div class="spinnerContainer" *ngIf="isLoading[1]">
        <mat-spinner class="spinner"></mat-spinner>
      </div>
      <div class="mt-2 text-rigth d-flex w-100 justify-content-center align-items-center ">
        <button mat-raised-button color="primary" style="background-color: var(--secondary-color);"><i
            class="fas fa-save mr-2"></i>Enregistrer</button>
      </div>
    </form>
  </div>
</div>