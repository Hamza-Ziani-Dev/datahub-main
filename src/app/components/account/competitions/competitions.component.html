<app-loading *ngIf="isLoading[0]"></app-loading>
<div class="title">
  <h5 class="text-center"><i class="fas fa-trophy mr-2"></i>MES COMPETITIONS</h5>
</div>
<div class="container pb-3" *ngIf="!isLoading[0]">
  <div class="text-right mt-3">
    <button mat-raised-button class="add_btn" color="primary" (click)="showAdd()"><i
        class="fas fa-plus mr-2"></i>AJOUTER UNE COMPETITION</button>
  </div>
  <div class="commentsContainer mt-3">
    <p style="text-align: center" *ngIf="competitions.length <= 0">Aucun competition n'etait trouvé</p>
    <table style="width: 100%;" class="table table-hover text-center" *ngIf="competitions.length > 0">
      <thead>
        <th>Competition</th>
        <th>Max cartons jaunes</th>
        <th></th>
      </thead>
      <tbody>
        <tr *ngFor="let element of competitions">
          <td>
            <mat-form-field class="full-width" appearance="outline">
              <mat-label>Nom</mat-label>
              <input matInput name="name" required [(ngModel)]="element.name" (change)="updateCompetition(element.id)"
                #name="ngModel">
              <mat-error *ngIf="name.invalid && name.touched">
                Nom n'est pas valide
              </mat-error>
            </mat-form-field>
          </td>
          <td>
            <mat-form-field class="full-width" appearance="outline">
              <mat-label>Numéro</mat-label>
              <input matInput name="yellow_card" type="number" required [(ngModel)]="element.yellow_card"
                (change)="updateCompetition(element.id)" #yellow_card="ngModel">
              <mat-error *ngIf="yellow_card.invalid && yellow_card.touched">
                Cartons jaunes n'est pas valide
              </mat-error>
            </mat-form-field>
          </td>
          <td>
            <div>
              <button mat-raised-button color="warn" (click)="deleteCompetition(element.id)"><i
                  class="fa fa-trash"></i></button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<div class="edit-event-container" *ngIf="isAdd">
  <div class="edit-event-box">
    <h3>Ajouter competition</h3>
    <hr>
    <div class="container-fluid">
      <div class="adduser pb-3">
        <div class="container mt-5">
          <mat-spinner *ngIf="isLoading[1]" style="margin: 0 auto;"></mat-spinner>
          <form #competitionForm="ngForm" (submit)="onSave()" *ngIf="!isLoading[1]">
            <div class="formContainer row">
              <div class="col-md-12">
                <mat-form-field class="full-width">
                  <input matInput name="name" placeholder="Nom" required [(ngModel)]="competition.name" #name="ngModel">
                  <mat-error *ngIf="name.invalid && name.touched">
                    Nom n'est pas valide
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-md-12">
                <mat-form-field class="full-width">
                  <input matInput name="yellow_card" placeholder="Max cartons jaunes" required
                    [(ngModel)]="competition.yellow_card" #yellow_card="ngModel">
                  <mat-error *ngIf="yellow_card.invalid && yellow_card.touched">
                    Cartons jaunes n'est pas valide
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
    <hr>
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-6">
          <button mat-raised-button color="primary" (click)="close()">Annuler</button>
        </div>
        <div class="col-md-6 text-right">
          <button mat-raised-button color="primary" style="margin-right: 10px;" (click)="onSave()"
            [disabled]="isLoading[1]">Enregistrer</button>
        </div>
      </div>
    </div>
  </div>
</div>